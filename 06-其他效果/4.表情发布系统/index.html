<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>表情发布系统</title>
    <link rel="stylesheet" href="./Css/index.css" />
  </head>

  <body>
    <div class="box">
      <h3 class="title">表情发布系统</h3>
      <textarea
        id="textarea"
        placeholder="今天有什么想说的？"
        maxlength="399"
      ></textarea>
      <button class="release-btn">发布</button>

      <!-- 表情列表 -->
      <div class="expressionMenu">
        <ul>
          <li class="emojeLi" alt="[em_1]" title="高兴">
            <img src="表情/1.png" />
          </li>
          <li class="emojeLi" alt="[em_2]" title="大哭">
            <img src="表情/2.png" />
          </li>
          <li class="emojeLi" alt="[em_3]" title="紧张">
            <img src="表情/3.png" />
          </li>
          <li class="emojeLi" alt="[em_4]" title="可爱">
            <img src="表情/4.png" />
          </li>
          <li class="emojeLi" alt="[em_5]" title="亲亲">
            <img src="表情/5.png" />
          </li>
          <li class="emojeLi" alt="[em_6]" title="生气">
            <img src="表情/6.png" />
          </li>
          <li class="emojeLi" alt="[em_7]" title="淘气">
            <img src="表情/7.png" />
          </li>
          <li class="emojeLi" alt="[em_8]" title="难受">
            <img src="表情/8.png" />
          </li>
          <li class="emojeLi" alt="[em_9]" title="呲牙">
            <img src="表情/9.png" />
          </li>
          <li class="emojeLi" alt="[em_10]" title="笑哭">
            <img src="表情/10.png" />
          </li>
          <li class="emojeLi" alt="[em_11]" title="色">
            <img src="表情/11.png" />
          </li>
          <li class="emojeLi" alt="[em_12]" title="忧愁">
            <img src="表情/12.png" />
          </li>
          <li class="emojeLi" alt="[em_13]" title="飞吻">
            <img src="表情/13.png" />
          </li>
          <li class="emojeLi" alt="[em_14]" title="失落">
            <img src="表情/14.png" />
          </li>
          <li class="emojeLi" alt="[em_15]" title="害怕">
            <img src="表情/15.png" />
          </li>
          <li class="emojeLi" alt="[em_16]" title="恐惧">
            <img src="表情/16.png" />
          </li>
          <li class="emojeLi" alt="[em_17]" title="不屑">
            <img src="表情/17.png" />
          </li>
          <li class="emojeLi" alt="[em_18]" title="冒金星">
            <img src="表情/18.png" />
          </li>
          <li class="emojeLi" alt="[em_19]" title="哼哼">
            <img src="表情/19.png" />
          </li>
          <li class="emojeLi" alt="[em_20]" title="汗">
            <img src="表情/20.png" />
          </li>
        </ul>
      </div>

      <!-- 展示内容 -->
      <h4>输入的内容是：</h4>
      <div class="testBoxTitle"></div>
    </div>

    <script src="Js/My_jQ.js"></script>
    <script>
      // 选择表情时将表情的 alt 属性添加到文本框中
      let emojeLi = $Al('.emojeLi')
      for (let i = 0; i < emojeLi.length; i++) {
        emojeLi[i].onclick = function () {
          const emojeLiAlt = emojeLi[i].getAttribute('alt')
          $D('textarea').value += emojeLiAlt
        }
      }

      // 点击发布按钮
      $('.release-btn').onclick = function () {
        if ($D('textarea').value === '') {
          alert('内容为空不能发表！')
        } else {
          // 表情替换
          let textareaVal = $D('textarea').value
          const replaceEm = textareaVal.replace(
            /\[em_([0-9]*)\]/g,
            "<img src='表情/$1.png'>"
          )

          $('.testBoxTitle').innerHTML = replaceEm
          $D('textarea').value = ''
        }
      }
    </script>
  </body>
</html>
